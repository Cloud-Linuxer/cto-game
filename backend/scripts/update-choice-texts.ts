import { DataSource } from 'typeorm';
import { Choice } from '../src/database/entities/choice.entity';

const dataSource = new DataSource({
  type: 'postgres',
  host: 'localhost',
  port: 5432,
  username: 'cto_admin',
  password: 'cto_game_password',
  database: 'cto_game',
  entities: [Choice],
  synchronize: false,
});

// 선택지 텍스트 매핑 (choiceId -> 새로운 텍스트)
const choiceTextUpdates: { [key: number]: string } = {
  // Turn 1 선택지들
  1: '💬 친구들에게 알리기\n\n지인들부터 시작하는 것이 스타트업의 정석입니다.\n작은 커뮤니티에서 빠른 피드백을 받을 수 있습니다.\n초기 사용자층을 확보하는 첫걸음이 될 것입니다.',

  2: '🔐 회원가입 시스템 구축\n\n사용자 관리 체계를 갖추는 것은 필수입니다.\n재방문율을 높이고 사용자 데이터를 수집할 수 있습니다.\n서비스의 기본 골격을 완성하는 중요한 단계입니다.',

  3: '🛡️ 보안과 신뢰 구축\n\n전문적인 도메인과 보안 인증서는 신뢰의 상징입니다.\n사용자들이 안심하고 서비스를 이용할 수 있게 됩니다.\n투자자들에게도 긍정적인 인상을 줄 것입니다.',

  4: '📊 투자 유치 준비\n\n초기 투자는 성장의 발판이 됩니다.\n설득력 있는 비전과 계획을 준비해야 합니다.\n성공하면 큰 도약의 기회를 얻게 됩니다.',

  5: '💼 신중한 관망\n\n때로는 기다림도 전략입니다.\n시장 상황을 파악하고 자금을 보존합니다.\n다음 기회를 위한 준비 시간을 가집니다.',

  // Turn 2 선택지들
  6: '📢 본격 마케팅 시작\n\n이제 더 많은 사람들에게 다가갈 때입니다.\n타겟 고객층을 찾아 적극적으로 홍보합니다.\n서비스 인지도를 빠르게 높일 수 있습니다.',

  7: '👤 사용자 경험 개선\n\n로그인 시스템으로 개인화된 서비스를 제공합니다.\n사용자들이 더 오래 머물고 자주 방문하게 됩니다.\n충성 고객층 형성의 기초를 다집니다.',

  8: '🔒 인프라 보안 강화\n\n전문적인 서비스로 거듭나기 위한 필수 조치입니다.\nHTTPS와 도메인으로 신뢰도를 크게 높입니다.\n보안은 곧 경쟁력이 됩니다.',

  9: '💡 혁신적 기능 개발\n\n차별화된 기능으로 시장을 놀라게 합니다.\n경쟁사가 쉽게 따라올 수 없는 독특함을 만듭니다.\n입소문을 타고 빠르게 성장할 수 있습니다.',

  10: '📊 데이터 분석 체계 구축\n\n측정할 수 없다면 개선할 수 없습니다.\n사용자 행동을 이해하고 서비스를 최적화합니다.\n데이터 기반 의사결정의 시작입니다.',

  // Turn 3 선택지들
  11: '🚀 공격적 마케팅 캠페인\n\n이제 대중에게 본격적으로 알릴 때입니다.\n다양한 채널을 통해 브랜드 인지도를 높입니다.\n폭발적인 성장의 계기가 될 수 있습니다.',

  12: '☁️ 클라우드 마이그레이션\n\n안정적인 서비스를 위한 필수 전환입니다.\n확장 가능한 인프라로 성장 기반을 마련합니다.\n전문적인 서비스 운영이 가능해집니다.',

  13: '🎯 수익 모델 도입\n\n지속 가능한 비즈니스를 위한 첫걸음입니다.\n프리미엄 기능으로 수익원을 창출합니다.\n투자자들에게 수익성을 증명할 수 있습니다.',

  14: '🤝 파트너십 체결\n\n혼자보다는 함께가 더 멀리 갈 수 있습니다.\n시너지 효과로 빠른 성장이 가능합니다.\n새로운 시장과 기회의 문이 열립니다.',

  15: '🛠️ 서비스 안정화 집중\n\n빠른 성장보다 탄탄한 기반이 중요합니다.\n버그를 수정하고 성능을 최적화합니다.\n사용자 만족도를 높이는 데 집중합니다.',

  // Turn 4 선택지들
  16: '📈 대규모 마케팅 투자\n\n브랜드를 널리 알릴 절호의 기회입니다.\n대중 매체를 통해 인지도를 극대화합니다.\n유니콘으로 가는 첫 단추를 끼웁니다.',

  17: '⚡ 고성능 인프라 구축\n\n미래를 내다보는 인프라 투자입니다.\n어떤 트래픽도 감당할 수 있는 시스템을 구축합니다.\n서비스 안정성으로 신뢰를 쌓습니다.',

  18: '💎 프리미엄 서비스 런칭\n\n차별화된 가치로 수익을 창출합니다.\n충성 고객에게 특별한 경험을 제공합니다.\n안정적인 수익 구조를 만들어갑니다.',

  19: '🌐 글로벌 진출 준비\n\n세계 시장을 향한 도전이 시작됩니다.\n현지화와 국제화 작업을 진행합니다.\n무한한 성장 가능성을 열어갑니다.',

  20: '🔬 R&D 집중 투자\n\n혁신적인 기술로 시장을 선도합니다.\n미래 경쟁력을 확보하는 전략적 투자입니다.\n게임체인저가 될 기술을 개발합니다.',

  // Turn 5 선택지들
  21: '🎪 바이럴 마케팅 전략\n\n입소문을 타고 폭발적으로 성장합니다.\n창의적인 캠페인으로 화제를 만듭니다.\n최소 비용으로 최대 효과를 노립니다.',

  22: '🏗️ 엔터프라이즈급 인프라\n\n대기업 수준의 안정성을 갖춥니다.\n어떤 상황에도 흔들리지 않는 시스템을 구축합니다.\n신뢰할 수 있는 서비스의 상징이 됩니다.',

  23: '💰 본격적인 수익화\n\n다양한 수익 모델을 동시에 가동합니다.\n광고, 구독, 수수료 등 여러 수익원을 만듭니다.\n재무 건전성을 크게 개선합니다.',

  24: '🚀 시리즈 A 투자 유치\n\n대규모 투자로 성장을 가속화합니다.\n유명 VC의 지원을 받아 도약합니다.\n유니콘의 꿈이 현실에 가까워집니다.',

  25: '🎯 니치 마켓 집중\n\n작지만 확실한 시장을 장악합니다.\n특정 고객층의 절대적 지지를 받습니다.\n탄탄한 수익 기반을 확보합니다.',

  // Turn 6 선택지들
  26: '📺 대중 매체 광고\n\nTV와 라디오로 대중에게 다가갑니다.\n브랜드 인지도가 급상승할 것입니다.\n주류 시장 진입의 신호탄이 됩니다.',

  27: '🌟 AI 기반 서비스 혁신\n\n최첨단 AI 기술로 서비스를 혁신합니다.\n사용자 경험을 완전히 새롭게 정의합니다.\n기술 리더십을 확보합니다.',

  28: '🏢 B2B 시장 진출\n\n기업 고객을 대상으로 서비스를 확장합니다.\n안정적이고 큰 규모의 계약을 체결합니다.\n예측 가능한 수익 구조를 만듭니다.',

  29: '🌏 아시아 시장 진출\n\n거대한 아시아 시장의 문을 두드립니다.\n현지 파트너와 함께 빠르게 성장합니다.\n글로벌 기업으로 도약합니다.',

  30: '⚡ 대규모 인프라 업그레이드\n\n차세대 인프라로 완전히 전환합니다.\n성능과 안정성을 획기적으로 개선합니다.\n무한 확장이 가능한 시스템을 구축합니다.',

  // Turn 7 선택지들
  31: '🛡️ 경쟁사 대응 전략\n\n차별화된 가치로 경쟁에서 승리합니다.\n고객 충성도를 높이는 데 집중합니다.\n경쟁사가 따라올 수 없는 해자를 만듭니다.',

  32: '💡 파괴적 혁신 추진\n\n시장의 룰을 완전히 바꿉니다.\n기존 방식을 뛰어넘는 새로운 패러다임을 제시합니다.\n업계를 선도하는 혁신가가 됩니다.',

  33: '🤝 전략적 인수합병\n\n경쟁사나 보완재를 인수합니다.\n시너지를 통해 빠르게 성장합니다.\n시장 지배력을 강화합니다.',

  34: '📊 IPO 준비 시작\n\n상장을 위한 체계적인 준비를 시작합니다.\n재무 구조를 개선하고 거버넌스를 강화합니다.\n자본시장 진출의 기반을 마련합니다.',

  35: '🎯 수직 통합 전략\n\n가치사슬 전체를 장악합니다.\n원가를 절감하고 품질을 통제합니다.\n독보적인 경쟁 우위를 확보합니다.',

  // Turn 8 선택지들
  36: '🚀 긴급 스케일업\n\n폭발적인 트래픽에 대응합니다.\n모든 리소스를 동원해 서버를 확장합니다.\n기회를 놓치지 않고 성장을 가속화합니다.',

  37: '⏸️ 일시적 제한 모드\n\n서비스 품질을 유지하기 위해 속도를 조절합니다.\n기존 사용자를 보호하며 점진적으로 확대합니다.\n안정성을 최우선으로 합니다.',

  38: '🌐 CDN 글로벌 확산\n\n전 세계에 서비스를 빠르게 제공합니다.\n지역별 최적화로 사용자 경험을 개선합니다.\n글로벌 서비스의 기반을 다집니다.',

  39: '💰 긴급 자금 조달\n\n성장 기회를 놓치지 않기 위해 빠르게 자금을 확보합니다.\n투자자들의 관심이 뜨거울 때 행동합니다.\n대규모 확장을 위한 자금을 마련합니다.',

  40: '🤖 자동화 시스템 구축\n\n수동 작업을 최소화하고 효율을 극대화합니다.\n24시간 무중단 서비스를 실현합니다.\n운영 비용을 크게 절감합니다.',

  // Turn 9 선택지들
  41: '💎 프리미엄 구독 모델\n\n충성 고객을 위한 특별한 혜택을 제공합니다.\n안정적인 월간 수익을 확보합니다.\n서비스의 지속 가능성을 높입니다.',

  42: '📱 프리미엄 전략\n\n무료와 유료의 균형을 찾습니다.\n기본 기능은 무료, 고급 기능은 유료로 제공합니다.\n사용자 기반을 유지하며 수익을 창출합니다.',

  43: '🏢 기업 라이선스\n\n대기업을 대상으로 큰 계약을 체결합니다.\n한 번에 큰 수익을 확보합니다.\nB2B 시장의 신뢰를 얻습니다.',

  44: '🎮 게이미피케이션 수익화\n\n재미있는 요소로 자연스럽게 수익을 창출합니다.\n사용자들이 기꺼이 돈을 쓰게 만듭니다.\n중독성 있는 수익 모델을 구축합니다.',

  45: '🌟 광고 플랫폼 구축\n\n사용자 데이터를 활용한 타겟 광고를 제공합니다.\n광고주와 사용자 모두 만족하는 생태계를 만듭니다.\n새로운 수익원을 창출합니다.',

  // Turn 10 선택지들
  46: '👥 대규모 채용\n\n최고의 인재들을 영입합니다.\n조직 역량을 크게 강화합니다.\n다음 단계 성장을 위한 팀을 구성합니다.',

  47: '🎯 핵심 인재 리텐션\n\n기존 팀원들의 만족도를 높입니다.\n스톡옵션과 복지로 충성도를 확보합니다.\n조직 문화를 강화합니다.',

  48: '🌐 글로벌 인재 영입\n\n세계 각국의 전문가를 영입합니다.\n다양성과 전문성을 동시에 확보합니다.\n글로벌 경쟁력을 갖춥니다.',

  49: '🤖 자동화로 효율화\n\n사람보다 시스템에 투자합니다.\n적은 인원으로 높은 효율을 달성합니다.\n린한 조직 구조를 유지합니다.',

  50: '🎓 사내 교육 강화\n\n직원들의 성장을 지원합니다.\n내부에서 전문가를 양성합니다.\n학습하는 조직 문화를 만듭니다.',

  // 긴급 이벤트 선택지들 (Turn 888)
  131: '🚨 비상 대응팀 가동\n\n모든 엔지니어를 소집합니다.\n24시간 비상 체제로 전환합니다.\n최대한 빠른 복구에 총력을 기울입니다.',

  132: '🔄 DR 시스템 전환\n\n재해복구 시스템으로 즉시 전환합니다.\n서비스 연속성을 최우선으로 합니다.\n고객 피해를 최소화합니다.',

  133: '📢 투명한 소통\n\n고객에게 상황을 솔직하게 알립니다.\n신뢰를 지키는 것이 가장 중요합니다.\n정직한 커뮤니케이션으로 위기를 극복합니다.',

  134: '⏸️ 일시 서비스 중단\n\n무리한 복구보다 안전을 선택합니다.\n완벽한 복구 후 재개합니다.\n고객 데이터 보호를 최우선으로 합니다.',

  // Turn 889 선택지들
  135: '💰 전액 보상 정책\n\n피해 고객에게 전액을 보상합니다.\n신뢰 회복을 위한 과감한 투자입니다.\n장기적 관계를 중시합니다.',

  136: '🎁 무료 크레딧 제공\n\n향후 사용 가능한 크레딧을 제공합니다.\n고객 이탈을 방지하고 재사용을 유도합니다.\n윈윈 전략을 추구합니다.',

  137: '📱 CEO 직접 사과\n\nCEO가 직접 나서서 사과합니다.\n진정성 있는 소통으로 신뢰를 회복합니다.\n리더십을 보여줍니다.',

  138: '🛡️ 보안 감사 실시\n\n외부 전문가의 철저한 감사를 받습니다.\n투명하게 결과를 공개합니다.\n신뢰할 수 있는 시스템을 구축합니다.',

  // Turn 890 선택지들
  139: '🏗️ 인프라 전면 개편\n\n이번 기회에 완전히 새로운 시스템을 구축합니다.\n더 강하고 안정적인 인프라를 만듭니다.\n미래를 위한 투자를 단행합니다.',

  140: '🤝 대기업과 파트너십\n\n안정적인 대기업과 손을 잡습니다.\n그들의 인프라와 노하우를 활용합니다.\n빠르게 안정성을 확보합니다.',

  141: '🎯 핵심 서비스 집중\n\n선택과 집중 전략을 택합니다.\n핵심 기능에만 리소스를 집중합니다.\n작지만 강한 서비스를 만듭니다.',

  142: '🚀 공격적 마케팅 재개\n\n위기를 기회로 전환합니다.\n더 강해진 모습을 적극 홍보합니다.\n시장의 신뢰를 되찾습니다.',

  // IPO 선택 턴 (950)
  143: '🔔 IPO 진행\n\n드디어 상장의 꿈을 실현합니다.\n주식시장에 회사를 공개합니다.\n새로운 성장 단계로 진입합니다.',

  144: '⏸️ IPO 연기\n\n더 나은 조건을 위해 기다립니다.\n시장 상황이 개선되기를 기대합니다.\n준비를 더욱 철저히 합니다.',

  145: '🎮 계속하기\n\n아직 IPO는 이릅니다.\n더 성장한 후 재도전합니다.\n비상장 상태를 유지합니다.',

  // 개발자 고용 선택지
  150: '💻 개발자 채용\n\n개발 역량을 크게 강화합니다.\n더 빠른 기능 개발이 가능해집니다.\n기술 경쟁력을 확보합니다.',

  // 디자이너 고용 선택지
  151: '🎨 디자이너 채용\n\n사용자 경험을 혁신적으로 개선합니다.\n아름답고 직관적인 인터페이스를 만듭니다.\n브랜드 가치를 높입니다.',

  // 기획자 고용 선택지
  152: '📋 기획자 채용\n\n체계적인 서비스 기획이 가능해집니다.\n사용자 요구를 정확히 파악합니다.\n전략적 방향성을 수립합니다.',

  // 마케터 고용 선택지
  153: '📣 마케터 채용\n\n전문적인 마케팅 전략을 수립합니다.\n효과적인 고객 획득이 가능해집니다.\n브랜드 인지도를 크게 높입니다.',

  // DR 구축 선택지
  154: '🔄 재해복구 시스템 구축\n\n어떤 상황에도 서비스가 중단되지 않습니다.\n완벽한 백업과 복구 체계를 갖춥니다.\n고객의 절대적 신뢰를 얻습니다.',

  // 투자 유치 선택지들
  155: '💵 시드 투자 유치\n\n초기 성장 자금을 확보합니다.\n엔젤 투자자의 지원을 받습니다.\n본격적인 성장을 시작합니다.',

  156: '🚀 시리즈 A 유치\n\n대규모 성장 자금을 확보합니다.\n유명 VC의 전략적 지원을 받습니다.\n유니콘으로 가는 길이 열립니다.',

  157: '💎 시리즈 B 유치\n\n글로벌 확장 자금을 확보합니다.\n업계 선도 기업으로 도약합니다.\n대규모 투자로 시장을 장악합니다.'
};

const updateChoiceTexts = async () => {
  await dataSource.initialize();

  let updatedCount = 0;
  let skippedCount = 0;

  for (const [choiceId, newText] of Object.entries(choiceTextUpdates)) {
    try {
      const result = await dataSource
        .createQueryBuilder()
        .update(Choice)
        .set({ text: newText })
        .where('choiceId = :choiceId', { choiceId: parseInt(choiceId) })
        .execute();

      if (result.affected && result.affected > 0) {
        console.log(`✅ Updated choice ${choiceId}`);
        updatedCount++;
      } else {
        console.log(`⏭️  Skipped choice ${choiceId} (not found)`);
        skippedCount++;
      }
    } catch (error) {
      console.error(`❌ Error updating choice ${choiceId}:`, error);
    }
  }

  console.log('\n📊 Update Summary:');
  console.log(`✅ Updated: ${updatedCount} choices`);
  console.log(`⏭️  Skipped: ${skippedCount} choices`);
  console.log(`📝 Total processed: ${Object.keys(choiceTextUpdates).length} choices`);

  await dataSource.destroy();
};

updateChoiceTexts()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error('Error updating choice texts:', error);
    process.exit(1);
  });