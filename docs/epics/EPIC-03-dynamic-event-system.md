# EPIC-03: ë™ì  ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ

## ëª©í‘œ

ê²Œì„ ì§„í–‰ ì¤‘ ìœ ì €ì˜ ê²Œì„ ìƒíƒœ(ìœ ì € ìˆ˜, ìê¸ˆ, ì‹ ë¢°ë„, ì¸í”„ë¼)ì— ë”°ë¼ ì˜ˆìƒì¹˜ ëª»í•œ **ë™ì  ì´ë²¤íŠ¸**ê°€ ë°œìƒí•˜ì—¬, ë¦¬í”Œë ˆì´ ê°€ì¹˜ë¥¼ ë†’ì´ê³  AWS ì•„í‚¤í…ì²˜ í•™ìŠµ ê²½í—˜ì„ ê°•í™”í•œë‹¤.

---

## ë°°ê²½

### í˜„ì¬ ë¬¸ì œì 
- **ê²°ì •ë¡ ì  ê²Œì„ íë¦„**: 25ê°œ í„´, 253ê°œ ì„ íƒì§€ê°€ ëª¨ë‘ ì‚¬ì „ ì •ì˜ë˜ì–´ ë™ì¼í•œ ì„ íƒ ì‹œ í•­ìƒ ë™ì¼í•œ ê²°ê³¼
- **ìƒíƒœ ê¸°ë°˜ ë°˜ì‘ ë¶€ì¬**: ê²Œì„ ìƒíƒœ(users, cash, trust)ê°€ ë³€í•´ë„ ì‹œì¥ì—ì„œ ì•„ë¬´ ë°˜ì‘ ì—†ìŒ
- **ë¦¬í”Œë ˆì´ ê°€ì¹˜ ë¶€ì¡±**: í•œ ë²ˆ ìµœì  ê²½ë¡œ ë°œê²¬ ì‹œ ë°˜ë³µ í”Œë ˆì´ ê°€ì¹˜ ê°ì†Œ
- **ê¸´ì¥ê° ë¶€ì¡±**: ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì§„í–‰ìœ¼ë¡œ ì„œí”„ë¼ì´ì¦ˆ ìš”ì†Œ ë¶€ì¬

### í•´ê²° ë°©ì•ˆ
ê¸°ì¡´ 25í„´ ì‹œìŠ¤í…œì„ ìœ ì§€í•˜ë©´ì„œ, **ì´ë²¤íŠ¸ ë ˆì´ì–´**ë¥¼ ì¶”ê°€í•˜ì—¬:
- í„´ ì‹œì‘ ì‹œ ê²Œì„ ìƒíƒœì— ë”°ë¼ ëœë¤ ì´ë²¤íŠ¸ ë°œìƒ
- AWS ì¥ì• , íˆ¬ì ê¸°íšŒ, ì‹œì¥ ë³€í™” ë“± ì‹¤ì œ ìŠ¤íƒ€íŠ¸ì—…ì´ ê²ªëŠ” ìƒí™© ì¬í˜„
- ì´ë²¤íŠ¸ ëŒ€ì‘ ì„ íƒì§€ë¥¼ í†µí•´ AWS ì•„í‚¤í…ì²˜ í•™ìŠµ ê°•í™”

---

## ì„±ê³µ ê¸°ì¤€

- [ ] ë§¤ í„´ ì´ë²¤íŠ¸ ë°œìƒ í™•ë¥  25-40% (ë‚œì´ë„ë³„ ì°¨ë“±)
- [ ] ë™ì¼ ì„ íƒ ì‹œì—ë„ 30% ì´ìƒ ë‹¤ë¥¸ ê²°ê³¼ ê²½ë¡œ ì œê³µ
- [ ] 5ê°€ì§€ ì´ë²¤íŠ¸ íƒ€ì… ëª¨ë‘ êµ¬í˜„ (RANDOM, CHAIN, CRISIS, OPPORTUNITY, SEASONAL)
- [ ] ìë™ ë°©ì–´ ì‹œìŠ¤í…œ ì‘ë™ (CloudFront, Aurora, DR ë“±)
- [ ] ì´ë²¤íŠ¸ íˆìŠ¤í† ë¦¬ ì €ì¥ ë° ì¡°íšŒ ê°€ëŠ¥
- [ ] í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 90% ì´ìƒ
- [ ] ê¸°ì¡´ ê²Œì„ í”Œë¡œìš° ì •ìƒ ì‘ë™ (íšŒê·€ í…ŒìŠ¤íŠ¸ í†µê³¼)

---

## Feature ë¶„í•´

### Feature 1: ì´ë²¤íŠ¸ í‰ê°€ ì—”ì§„ (Event Evaluation Engine)
- **ì„¤ëª…**: í„´ ì‹œì‘ ì‹œ ê²Œì„ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì´ë²¤íŠ¸ ë°œìƒ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ëŠ” í•µì‹¬ ë¡œì§
- **ì±…ì„ì**: Server AI
- **ì˜ì¡´ì„±**: None (ë…ë¦½ êµ¬í˜„ ê°€ëŠ¥)
- **ì˜ˆìƒ ë¦¬ìŠ¤í¬**: ì¡°ê±´ ë§¤ì¹­ ë¡œì§ ë³µì¡ë„ ì¦ê°€, ì„±ëŠ¥ ì´ìŠˆ (ë§ì€ ì´ë²¤íŠ¸ í’€ ìŠ¤ìº”)
- **êµ¬í˜„ íŒŒì¼**:
  - `backend/src/event/event.service.ts` (í•µì‹¬ ë¡œì§)
  - `backend/src/database/entities/dynamic-event.entity.ts`
  - `backend/src/database/entities/event-state.entity.ts`

### Feature 2: ì´ë²¤íŠ¸ ì¡°ê±´ ì‹œìŠ¤í…œ (Trigger Condition System)
- **ì„¤ëª…**: ë‹¤ì–‘í•œ ì¡°ê±´(í„´, ìœ ì € ìˆ˜, ìê¸ˆ, ì¸í”„ë¼ ë“±)ì„ í‰ê°€í•˜ì—¬ ì´ë²¤íŠ¸ ë°œìƒ ì ê²©ì„± íŒë‹¨
- **ì±…ì„ì**: Server AI + Designer AI (ìˆ˜ì¹˜ ë°¸ëŸ°ìŠ¤)
- **ì˜ì¡´ì„±**: Feature 1 ì™„ë£Œ í›„
- **ì˜ˆìƒ ë¦¬ìŠ¤í¬**: ì¡°ê±´ ì¡°í•© ë³µì¡ë„, ë°¸ëŸ°ìŠ¤ ì¡°ì • ì–´ë ¤ì›€
- **ì£¼ìš” ì¡°ê±´**:
  - í„´ ë²”ìœ„ (`minTurn`, `maxTurn`)
  - ê²Œì„ ìƒíƒœ (`minUsers`, `maxUsers`, `minCash`, `maxCash`, `minTrust`, `maxTrust`)
  - ì¸í”„ë¼ ì¡°ê±´ (`requireInfra`, `excludeInfra`)
  - í™•ë¥  (`baseProbability`)
  - ì´ì „ ì´ë²¤íŠ¸ ì˜ì¡´ì„± (`requirePreviousEvent`)

### Feature 3: ì´ë²¤íŠ¸ íƒ€ì… ì‹œìŠ¤í…œ (Event Type System)
- **ì„¤ëª…**: 5ê°€ì§€ ì´ë²¤íŠ¸ íƒ€ì… (RANDOM, CHAIN, CRISIS, OPPORTUNITY, SEASONAL) êµ¬í˜„
- **ì±…ì„ì**: Designer AI (ì´ë²¤íŠ¸ ì„¤ê³„) + Server AI (íƒ€ì…ë³„ ë¡œì§)
- **ì˜ì¡´ì„±**: Feature 2 ì™„ë£Œ í›„
- **ì˜ˆìƒ ë¦¬ìŠ¤í¬**: íƒ€ì…ë³„ ìš°ì„ ìˆœìœ„ ì¶©ëŒ, ì—°ì‡„ ì´ë²¤íŠ¸ ë£¨í”„
- **íƒ€ì…ë³„ íŠ¹ì„±**:
  - **RANDOM**: ì¡°ê±´ ì¶©ì¡± ì‹œ í™•ë¥ ì  ë°œìƒ
  - **CHAIN**: ì´ì „ ì´ë²¤íŠ¸ì— ì˜ì¡´í•˜ì—¬ ì—°ì‡„ ë°œìƒ
  - **CRISIS**: ë†’ì€ ìš°ì„ ìˆœìœ„, ë¶€ì •ì  ì˜í–¥
  - **OPPORTUNITY**: ì¤‘ê°„ ìš°ì„ ìˆœìœ„, ê¸ì •ì  ê¸°íšŒ
  - **SEASONAL**: íŠ¹ì • ì‹œì¦Œ/ë©”íƒ€ ì´ë²¤íŠ¸

### Feature 4: ìë™ ë°©ì–´ ì‹œìŠ¤í…œ (Auto-Defense System)
- **ì„¤ëª…**: íŠ¹ì • ì¸í”„ë¼(CloudFront, Aurora, DR)ê°€ ìˆì„ ê²½ìš° ìœ„ê¸° ì´ë²¤íŠ¸ í”¼í•´ ìë™ ê°ì†Œ
- **ì±…ì„ì**: Server AI + Designer AI (ê°ì†Œìœ¨ ë°¸ëŸ°ìŠ¤)
- **ì˜ì¡´ì„±**: Feature 3 ì™„ë£Œ í›„
- **ì˜ˆìƒ ë¦¬ìŠ¤í¬**: ë°©ì–´ íš¨ê³¼ ê³¼ë„ ì‹œ ê²Œì„ ë‚œì´ë„ ì €í•˜
- **ë°©ì–´ ë©”ì»¤ë‹ˆì¦˜**:
  - CloudFront: DDoS ê³µê²© í”¼í•´ 50% ê°ì†Œ
  - Aurora Global DB: ë¦¬ì „ ì¥ì•  í”¼í•´ 70% ê°ì†Œ
  - DR (Disaster Recovery): ëª¨ë“  ì¥ì•  í”¼í•´ 30% ê°ì†Œ
  - Multi-region: ì§€ì—­ë³„ ì¥ì•  ì™„ì „ ë¬´íš¨í™”

### Feature 5: ì´ë²¤íŠ¸ íˆìŠ¤í† ë¦¬ ì¶”ì  (Event History Tracking)
- **ì„¤ëª…**: ê²Œì„ë³„ ì´ë²¤íŠ¸ ë°œìƒ ì´ë ¥ ì €ì¥, ì¤‘ë³µ ë°©ì§€, í†µê³„ ì¡°íšŒ
- **ì±…ì„ì**: Server AI
- **ì˜ì¡´ì„±**: Feature 1 ì™„ë£Œ í›„ (ë³‘ë ¬ ê°€ëŠ¥)
- **ì˜ˆìƒ ë¦¬ìŠ¤í¬**: DB ë¶€í•˜, íˆìŠ¤í† ë¦¬ ì¿¼ë¦¬ ì„±ëŠ¥
- **êµ¬í˜„ ì‚¬í•­**:
  - EventHistory ì—”í‹°í‹° ìƒì„±
  - ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ìë™ ê¸°ë¡
  - ì¤‘ë³µ ì´ë²¤íŠ¸ ë°©ì§€ (ê°™ì€ ì´ë²¤íŠ¸ ì—°ì† ë°œìƒ ê¸ˆì§€)
  - ê²Œì„ë³„ ì´ë²¤íŠ¸ í†µê³„ ì¡°íšŒ API

### Feature 6: ë‚œì´ë„ë³„ ì´ë²¤íŠ¸ ë°°ìœ¨ (Difficulty-based Event Multiplier)
- **ì„¤ëª…**: ë‚œì´ë„(EASY/NORMAL/HARD)ì— ë”°ë¼ ì´ë²¤íŠ¸ í™•ë¥  ë° íš¨ê³¼ ì¡°ì •
- **ì±…ì„ì**: Designer AI (ë°¸ëŸ°ìŠ¤) + Server AI (êµ¬í˜„)
- **ì˜ì¡´ì„±**: Feature 1, 2 ì™„ë£Œ í›„
- **ì˜ˆìƒ ë¦¬ìŠ¤í¬**: ë‚œì´ë„ë³„ ë°¸ëŸ°ìŠ¤ ì¡°ì • ë³µì¡
- **ë°°ìœ¨ ì„¤ì •**:
  - EASY: ì´ë²¤íŠ¸ í™•ë¥  0.7ë°°, í”¼í•´ 0.7ë°°, ë³´ìƒ 1.3ë°°
  - NORMAL: ì´ë²¤íŠ¸ í™•ë¥  1.0ë°°, í”¼í•´ 1.0ë°°, ë³´ìƒ 1.0ë°°
  - HARD: ì´ë²¤íŠ¸ í™•ë¥  1.3ë°°, í”¼í•´ 1.5ë°°, ë³´ìƒ 0.8ë°°

### Feature 7: ì´ë²¤íŠ¸ UI í†µí•© (Event UI Integration)
- **ì„¤ëª…**: Frontendì—ì„œ ì´ë²¤íŠ¸ ë°œìƒ ì‹œ íŒì—… í‘œì‹œ ë° ì„ íƒì§€ ì œê³µ
- **ì±…ì„ì**: Client AI
- **ì˜ì¡´ì„±**: Feature 1-6 ì™„ë£Œ í›„
- **ì˜ˆìƒ ë¦¬ìŠ¤í¬**: ëª¨ë°”ì¼ ë°˜ì‘í˜•, ì• ë‹ˆë©”ì´ì…˜ ì„±ëŠ¥
- **êµ¬í˜„ ì‚¬í•­**:
  - EventPopup ì»´í¬ë„ŒíŠ¸ ìƒì„±
  - ì´ë²¤íŠ¸ íƒ€ì…ë³„ ì•„ì´ì½˜ ë° ìƒ‰ìƒ ì°¨ë³„í™”
  - ì„ íƒì§€ ì¹´ë“œ UI (ChoiceCard ì¬ì‚¬ìš©)
  - ì´ë²¤íŠ¸ íˆìŠ¤í† ë¦¬ ë·°ì–´

---

## ì˜ì¡´ì„± ë§µ

```mermaid
graph TD
  F1[F1: ì´ë²¤íŠ¸ í‰ê°€ ì—”ì§„] --> F2[F2: ì¡°ê±´ ì‹œìŠ¤í…œ]
  F1 --> F5[F5: íˆìŠ¤í† ë¦¬ ì¶”ì ]
  F2 --> F3[F3: ì´ë²¤íŠ¸ íƒ€ì…]
  F2 --> F6[F6: ë‚œì´ë„ ë°°ìœ¨]
  F3 --> F4[F4: ìë™ ë°©ì–´]
  F4 --> F7[F7: UI í†µí•©]
  F6 --> F7
  F5 --> F7
```

**Critical Path**: F1 â†’ F2 â†’ F3 â†’ F4 â†’ F7

---

## ë¦´ë¦¬ì¦ˆ ì „ëµ

### Phase 1: Backend í•µì‹¬ (Week 1-2) âœ… **ì™„ë£Œ**
- **í¬í•¨ Feature**: F1 (í‰ê°€ ì—”ì§„), F2 (ì¡°ê±´ ì‹œìŠ¤í…œ), F5 (íˆìŠ¤í† ë¦¬)
- **í˜„ì¬ ìƒíƒœ**:
  - âœ… EventService êµ¬í˜„ ì™„ë£Œ
  - âœ… DynamicEvent, EventState, EventHistory ì—”í‹°í‹° ìƒì„±
  - âœ… ì¡°ê±´ í‰ê°€ ë¡œì§ êµ¬í˜„
  - âœ… Seeded Random (seedrandom íŒ¨í‚¤ì§€) ì ìš©
  - âœ… í…ŒìŠ¤íŠ¸ ì½”ë“œ 31ê°œ ì‘ì„± (event.service.spec.ts)
- **ë¦´ë¦¬ì¦ˆ ê¸°ì¤€**: Unit Test í†µê³¼, API ì‘ë‹µ < 200ms
- **Rollback ì¡°ê±´**: ê¸°ì¡´ ê²Œì„ í”Œë¡œìš° íšŒê·€ ì´ìŠˆ

### Phase 2: ê³ ê¸‰ ê¸°ëŠ¥ (Week 3) âœ… **ì™„ë£Œ**
- **í¬í•¨ Feature**: F3 (ì´ë²¤íŠ¸ íƒ€ì…), F4 (ìë™ ë°©ì–´), F6 (ë‚œì´ë„ ë°°ìœ¨)
- **í˜„ì¬ ìƒíƒœ**:
  - âœ… 5ê°€ì§€ ì´ë²¤íŠ¸ íƒ€ì… êµ¬í˜„
  - âœ… ìë™ ë°©ì–´ ì‹œìŠ¤í…œ êµ¬í˜„ (CloudFront, Aurora, DR, Multi-region)
  - âœ… ì—°ì‡„ ì´ë²¤íŠ¸ ë¡œì§ êµ¬í˜„
  - âœ… ë‚œì´ë„ë³„ ë°°ìœ¨ ì‹œìŠ¤í…œ êµ¬í˜„
  - âœ… í†µí•© í…ŒìŠ¤íŠ¸ 12ê°œ ì‘ì„± (event-integration.spec.ts)
  - âœ… Edge Case í…ŒìŠ¤íŠ¸ 33ê°œ ì‘ì„± (event-edge-cases.spec.ts)
- **ë¦´ë¦¬ì¦ˆ ê¸°ì¤€**: Integration Test í†µê³¼, ì´ë²¤íŠ¸ ìš°ì„ ìˆœìœ„ ì •ìƒ ì‘ë™
- **Rollback ì¡°ê±´**: ì´ë²¤íŠ¸ ë¬´í•œ ë£¨í”„, ê²Œì„ ë¶ˆê°€ëŠ¥ ìƒíƒœ

### Phase 3: UI í†µí•© ë° ì½˜í…ì¸  (Week 4) âš ï¸ **ì§„í–‰ ì¤‘**
- **í¬í•¨ Feature**: F7 (UI í†µí•©)
- **í˜„ì¬ ìƒíƒœ**:
  - â¬œ EventPopup ì»´í¬ë„ŒíŠ¸ ë¯¸ì™„ì„±
  - â¬œ ì´ë²¤íŠ¸ ë°ì´í„° í’€ ë¹„ì–´ìˆìŒ (ì‹¤ì œ ì´ë²¤íŠ¸ ì½˜í…ì¸  í•„ìš”)
  - â¬œ Frontend API ì—°ë™ í•„ìš”
- **í•„ìš” ì‘ì—…**:
  - EventPopup.tsx ì»´í¬ë„ŒíŠ¸ ìƒì„±
  - ì´ë²¤íŠ¸ íƒ€ì…ë³„ UI ë””ìì¸
  - ì´ë²¤íŠ¸ ì½˜í…ì¸  ì‘ì„± (ìµœì†Œ 20ê°œ)
  - E2E í…ŒìŠ¤íŠ¸
- **ë¦´ë¦¬ì¦ˆ ê¸°ì¤€**: E2E Test í†µê³¼, ëª¨ë°”ì¼ ë°˜ì‘í˜• í™•ì¸
- **Rollback ì¡°ê±´**: UI ë Œë”ë§ ì‹¤íŒ¨, ì´ë²¤íŠ¸ ì„ íƒ ë¶ˆê°€

### Phase 4: ì½˜í…ì¸  í™•ì¥ (Week 5+) ğŸ“‹ **ê³„íš**
- **ëª©í‘œ**: ì´ë²¤íŠ¸ í’€ í™•ì¥ (20ê°œ â†’ 50ê°œ+)
- **ì´ë²¤íŠ¸ ì¹´í…Œê³ ë¦¬**:
  - AWS ì¥ì•  ì´ë²¤íŠ¸ 10ê°œ (ë¦¬ì „ ì¥ì• , DDoS, ë³´ì•ˆ ì¹¨í•´ ë“±)
  - íˆ¬ì ê¸°íšŒ ì´ë²¤íŠ¸ 10ê°œ (ê¸´ê¸‰ íˆ¬ì, ì œíœ´ ì œì•ˆ, ì¸ì¬ ì˜ì… ë“±)
  - ì‹œì¥ ë³€í™” ì´ë²¤íŠ¸ 10ê°œ (ê²½ìŸì‚¬ ë“±ì¥, ê·œì œ ë³€í™”, íŠ¸ë Œë“œ ì „í™˜ ë“±)
  - ì—°ì‡„ ì´ë²¤íŠ¸ 10ê°œ (ìŠ¤í† ë¦¬ ë¼ì¸ ì—°ê²°)
  - ì‹œì¦Œ ì´ë²¤íŠ¸ 10ê°œ (íŠ¹ë³„ ì´ë²¤íŠ¸)

---

## ë¦¬ìŠ¤í¬ ê´€ë¦¬

| ë¦¬ìŠ¤í¬ | ì˜í–¥ë„ | í™•ë¥  | ëŒ€ì‘ ë°©ì•ˆ | ìš°íšŒ ë°©ì•ˆ |
|--------|--------|------|-----------|-----------|
| ì´ë²¤íŠ¸ ë§¤ì¹­ ë¡œì§ ë³µì¡ë„ ì¦ê°€ | High | Medium | ì¡°ê±´ í‰ê°€ ìˆœì„œ ìµœì í™”, ë‹¨ìˆœ ì¡°ê±´ ë¨¼ì € í‰ê°€ | ì¡°ê±´ ê°œìˆ˜ ì œí•œ (ìµœëŒ€ 10ê°œ) |
| ì´ë²¤íŠ¸ í’€ ë¡œë”© ì„±ëŠ¥ ì €í•˜ | Medium | Low | ë©”ëª¨ë¦¬ ìºì‹±, í„´ë³„ ì¸ë±ì‹± | Redis ìºì‹± (Phase 1+) |
| ì—°ì‡„ ì´ë²¤íŠ¸ ë¬´í•œ ë£¨í”„ | High | Low | ìµœëŒ€ ì—°ì‡„ ê¹Šì´ ì œí•œ (3ë‹¨ê³„), ìˆœí™˜ ê²€ì¦ | ì—°ì‡„ ì´ë²¤íŠ¸ ì¹´ìš´í„° ì¶”ê°€ |
| ìë™ ë°©ì–´ ê³¼ë„ë¡œ ê²Œì„ ì‰¬ì›Œì§ | Medium | Medium | ë°©ì–´ìœ¨ ë°¸ëŸ°ìŠ¤ ì¡°ì • (í…ŒìŠ¤íŠ¸ í•„ìš”) | ë°©ì–´ ì¡°ê±´ ê°•í™” (ê³ ê¸‰ ì¸í”„ë¼ë§Œ) |
| ì´ë²¤íŠ¸ ì½˜í…ì¸  ë¶€ì¡± | High | High | ì™¸ë¶€ ì‘ê°€ ì„­ì™¸, LLM í™œìš© ì½˜í…ì¸  ìƒì„± | ê¸°ì¡´ í„´ ì´ë²¤íŠ¸ ì¬í™œìš© |
| UI ì„±ëŠ¥ ì´ìŠˆ (ëª¨ë°”ì¼) | Medium | Medium | ì• ë‹ˆë©”ì´ì…˜ ìµœì í™”, ë²ˆë“¤ í¬ê¸° ì¶•ì†Œ | ì• ë‹ˆë©”ì´ì…˜ ë¹„í™œì„±í™” ì˜µì…˜ |
| ê¸°ì¡´ ê²Œì„ í”Œë¡œìš° íšŒê·€ | Critical | Low | ì² ì €í•œ íšŒê·€ í…ŒìŠ¤íŠ¸, ê¸°ì¡´ API í˜¸í™˜ì„± ìœ ì§€ | Feature Flagë¡œ ì´ë²¤íŠ¸ ë¹„í™œì„±í™” |

---

## ì¡°ìœ¨ í¬ì¸íŠ¸

### Designer AIì™€ ì¡°ìœ¨
- [ ] ì´ë²¤íŠ¸ ë°œìƒ í™•ë¥  ë°¸ëŸ°ìŠ¤ (25-40% ëª©í‘œ)
- [ ] ì´ë²¤íŠ¸ íš¨ê³¼ ìˆ˜ì¹˜ ë°¸ëŸ°ìŠ¤ (users, cash, trust)
- [ ] ë‚œì´ë„ë³„ ë°°ìœ¨ ì¡°ì •
- [ ] ìë™ ë°©ì–´ ê°ì†Œìœ¨ ê²°ì •
- [ ] ì´ë²¤íŠ¸ ì½˜í…ì¸  ì‘ì„± (ìµœì†Œ 20ê°œ)

### Client AIì™€ ì¡°ìœ¨
- [ ] EventPopup ì»´í¬ë„ŒíŠ¸ UI/UX ì„¤ê³„
- [ ] ì´ë²¤íŠ¸ íƒ€ì…ë³„ ì•„ì´ì½˜ ë° ìƒ‰ìƒ
- [ ] ì´ë²¤íŠ¸ íˆìŠ¤í† ë¦¬ ë·°ì–´ ë ˆì´ì•„ì›ƒ
- [ ] ëª¨ë°”ì¼ ë°˜ì‘í˜• ë””ìì¸
- [ ] API ì‘ë‹µ êµ¬ì¡° í™•ì¸ (randomEventTriggered, randomEventData)

### Server AIì™€ ì¡°ìœ¨
- [ ] API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ í•„ìš” ì—¬ë¶€ (í˜„ì¬ëŠ” ê¸°ì¡´ executeChoice í™œìš©)
- [ ] ì´ë²¤íŠ¸ ë°ì´í„° ì €ì¥ í˜•ì‹ (JSON vs DB)
- [ ] ì„±ëŠ¥ ìµœì í™” ì „ëµ (ìºì‹±, ì¸ë±ì‹±)
- [ ] ë³´ì•ˆ ê³ ë ¤ì‚¬í•­ (ì‹œë“œ ì¡°ì‘ ë°©ì§€)

### QA AIì™€ ì¡°ìœ¨
- [ ] íšŒê·€ í…ŒìŠ¤íŠ¸ ë²”ìœ„: ê¸°ì¡´ 25í„´ ì‹œìŠ¤í…œ ì „ì²´
- [ ] Edge Case ìš°ì„ ìˆœìœ„: ì¤‘ë³µ ì´ë²¤íŠ¸, ë¬´í•œ ë£¨í”„, ê²Œì„ ì¢…ë£Œ ì¡°ê±´
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸: ì´ë²¤íŠ¸ ë§¤ì¹­ ì†ë„ < 100ms
- [ ] ì¬í˜„ì„± í…ŒìŠ¤íŠ¸: Seeded Random ê²€ì¦

---

## êµ¬í˜„ í˜„í™© (2026-02-04 ê¸°ì¤€)

### âœ… ì™„ë£Œëœ í•­ëª©
1. **EventService í•µì‹¬ ë¡œì§**
   - checkRandomEvent() - ì´ë²¤íŠ¸ ë°œìƒ ì—¬ë¶€ íŒë‹¨
   - evaluateTriggerCondition() - ì¡°ê±´ í‰ê°€
   - filterEligibleEvents() - ì ê²© ì´ë²¤íŠ¸ í•„í„°ë§
   - prioritizeEvents() - ìš°ì„ ìˆœìœ„ ì •ë ¬

2. **Database Entities**
   - DynamicEvent (ì´ë²¤íŠ¸ ì •ì˜)
   - EventState (ê²Œì„ë³„ ì´ë²¤íŠ¸ ìƒíƒœ)
   - EventHistory (ì´ë²¤íŠ¸ ë°œìƒ ì´ë ¥)
   - Game ì—”í‹°í‹° í™•ì¥ (eventSeed, activeEvents, completedEvents, eventFlags)

3. **ê³ ê¸‰ ê¸°ëŠ¥**
   - Seeded Random (seedrandom íŒ¨í‚¤ì§€)
   - ìë™ ë°©ì–´ ì‹œìŠ¤í…œ (CloudFront, Aurora, DR, Multi-region)
   - ì—°ì‡„ ì´ë²¤íŠ¸ ë¡œì§
   - ë‚œì´ë„ë³„ ë°°ìœ¨ ì‹œìŠ¤í…œ
   - ì¤‘ë³µ ì´ë²¤íŠ¸ ë°©ì§€

4. **í…ŒìŠ¤íŠ¸ ì½”ë“œ**
   - Unit Test: 31ê°œ (event.service.spec.ts)
   - Integration Test: 12ê°œ (event-integration.spec.ts)
   - Edge Case Test: 33ê°œ (event-edge-cases.spec.ts)
   - **ì´ 76ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**

5. **ë¬¸ì„œí™”**
   - EVENT_SYSTEM_DESIGN.md (ì„¤ê³„ ë¬¸ì„œ)
   - EVENT_SYSTEM_TEST_STRATEGY.md (í…ŒìŠ¤íŠ¸ ì „ëµ)
   - event-system-refactoring.md (ë¦¬íŒ©í† ë§ ê°€ì´ë“œ)
   - event-type-hierarchy.md (ì´ë²¤íŠ¸ íƒ€ì… ê³„ì¸µ)
   - README.md (ê°œë°œ ê°€ì´ë“œ)

### âš ï¸ ì§„í–‰ ì¤‘ì¸ í•­ëª©
1. **Frontend UI í†µí•©** (Feature 7)
   - EventPopup ì»´í¬ë„ŒíŠ¸ ë¯¸ì™„ì„±
   - API ì‘ë‹µ êµ¬ì¡° Frontend ë°˜ì˜ í•„ìš”

2. **ì´ë²¤íŠ¸ ì½˜í…ì¸ ** (Feature 4)
   - ì‹¤ì œ ì´ë²¤íŠ¸ ë°ì´í„° ë¹„ì–´ìˆìŒ
   - ìµœì†Œ 20ê°œ ì´ë²¤íŠ¸ ì‘ì„± í•„ìš”

### â¬œ ê³„íš ë‹¨ê³„
1. **ì„±ëŠ¥ ìµœì í™”**
   - ë©”ëª¨ë¦¬ ìºì‹± (ì´ë²¤íŠ¸ í’€)
   - í„´ë³„ ì¸ë±ì‹± (O(n) â†’ O(1) ì¡°íšŒ)

2. **ìš´ì˜ ê¸°ëŠ¥**
   - ì–´ë“œë¯¼ í˜ì´ì§€ (ì´ë²¤íŠ¸ ê´€ë¦¬)
   - ì´ë²¤íŠ¸ í†µê³„ ëŒ€ì‹œë³´ë“œ

---

## ê¸°ìˆ  ìŠ¤íƒ

- **Backend**: NestJS + TypeScript + TypeORM
- **Database**: SQLite (dev) â†’ Aurora MySQL (prod)
- **Random**: seedrandom (Seeded RNG)
- **Security**: SecureRandomService (crypto ê¸°ë°˜)
- **Testing**: Jest (Unit/Integration/E2E)
- **Frontend**: Next.js + TypeScript + TailwindCSS (Phase 3)

---

## ì°¸ê³  ë¬¸ì„œ

- **PRD**: `/home/cto-game/docs/dynamic-event-system-prd.md`
- **Part 2**: `/home/cto-game/docs/dynamic-event-system-prd-part2.md`
- **Part 3**: `/home/cto-game/docs/dynamic-event-system-prd-part3.md`
- **ì„¤ê³„ ë¬¸ì„œ**: `/home/cto-game/backend/docs/EVENT_SYSTEM_DESIGN.md`
- **í…ŒìŠ¤íŠ¸ ì „ëµ**: `/home/cto-game/backend/docs/EVENT_SYSTEM_TEST_STRATEGY.md`
- **ì½”ë“œ**: `/home/cto-game/backend/src/event/`

---

## ë‹¤ìŒ ë‹¨ê³„ (Next Actions)

### ì¦‰ì‹œ (ì´ë²ˆ ì£¼)
1. **EventPopup ì»´í¬ë„ŒíŠ¸ ìƒì„±** (Client AI)
   - ìœ„ì¹˜: `frontend/components/EventPopup.tsx`
   - ê¸°ëŠ¥: ì´ë²¤íŠ¸ íƒ€ì…ë³„ UI, ì„ íƒì§€ í‘œì‹œ, ì• ë‹ˆë©”ì´ì…˜

2. **ì´ë²¤íŠ¸ ì½˜í…ì¸  ì‘ì„±** (Designer AI)
   - ìµœì†Œ 20ê°œ ì´ë²¤íŠ¸ ì‘ì„±
   - ì´ë²¤íŠ¸ íƒ€ì…ë³„ ê· ë“± ë¶„ë°° (ê° íƒ€ì… 4ê°œì”©)
   - AWS êµìœ¡ ìš”ì†Œ í¬í•¨

3. **Frontend API ì—°ë™** (Client AI)
   - GameResponse DTOì˜ randomEventTriggered ì²˜ë¦¬
   - ì´ë²¤íŠ¸ ì„ íƒ ì‹œ API í˜¸ì¶œ ë¡œì§

### ë‹¨ê¸° (ì´ë²ˆ ë‹¬)
4. **E2E í…ŒìŠ¤íŠ¸** (QA AI)
   - ì´ë²¤íŠ¸ ë°œìƒ â†’ ì„ íƒ â†’ íš¨ê³¼ ì ìš© ì „ì²´ í”Œë¡œìš°
   - íšŒê·€ í…ŒìŠ¤íŠ¸ (ê¸°ì¡´ ê²Œì„ í”Œë¡œìš°)

5. **ì„±ëŠ¥ ìµœì í™”** (Server AI)
   - ì´ë²¤íŠ¸ í’€ ë©”ëª¨ë¦¬ ìºì‹±
   - í„´ë³„ ì¸ë±ì‹±

### ì¤‘ê¸° (3ê°œì›”)
6. **ì´ë²¤íŠ¸ ì½˜í…ì¸  í™•ì¥** (Designer AI + ì™¸ë¶€ ì‘ê°€)
   - 50ê°œ ì´ë²¤íŠ¸ë¡œ í™•ì¥
   - ì—°ì‡„ ì´ë²¤íŠ¸ ìŠ¤í† ë¦¬ ë¼ì¸

7. **LLM ë™ì  ì´ë²¤íŠ¸ ìƒì„±** (Phase 2)
   - Bedrock ì—°ë™
   - ê²Œì„ ìƒíƒœ ê¸°ë°˜ ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ìƒì„±

---

**ì‘ì„±ì**: Producer AI
**ì‘ì„±ì¼**: 2026-02-04
**ê²€í† ì**: {PO ì´ë¦„} (ê²€í†  ëŒ€ê¸°)
**ìƒíƒœ**: Draft (ì´ˆì•ˆ ì‘ì„± ì™„ë£Œ)

---

**ë²„ì „ ì´ë ¥**:
- v1.0 (2026-02-04): ì´ˆì•ˆ ì‘ì„±, êµ¬í˜„ í˜„í™© ë°˜ì˜
